[build]
command = "pnpm install --no-frozen-lockfile && pnpm build"
publish = "dist"
functions = "netlify/functions"

[build.environment]
NODE_VERSION = "22"
PNPM_VERSION = "10.4.1"
NPM_FLAGS = "--legacy-peer-deps"

[[redirects]]
from = "/*"
to = "/index.html"
status = 200

[[redirects]]
from = "/api/*"
to = "/.netlify/functions/:splat"
status = 200

[context.production]
command = "pnpm install --no-frozen-lockfile && pnpm build"

[context.deploy-preview]
command = "pnpm install --no-frozen-lockfile && pnpm build"

[context.branch-deploy]
command = "pnpm install --no-frozen-lockfile && pnpm build"
